
<section style="background-color: #eee;">
  <div class="container py-5">

  <div class="sticky-search">
    <%= form_with url: categories_path, method: :get, id:"search-bar", class: "d-flex" do %>
      <%= text_field_tag :query,
      params[:query],
      class: "form-control",
      placeholder: "Find User/Title/Description"
       %>
       <%= hidden_field_tag :category,
      params[:category],
      class: "form-control",
      placeholder: "Find User/Title/Description"
       %>
      <%= submit_tag "ðŸ”Ž", class: "btn-search" %>
    <% end %>
  </div>

    <div class="row row-cols-3 mt-3 gy-4">

      <% @services.each do |service| %>
      <div class="col-12 col-sm-6 col-lg-4">
        <div class="card shadow h-100" style="border-radius: 15px;">
          <div class="bg-image hover-overlay ripple ripple-surface ripple-surface-light p-3 rounded-bottom d-flex flex-column"
            data-mdb-ripple-color="light">
            <% if service.user.photo.attached?%>
            <%= image_tag  cl_image_path service.user.photo.key, height: 400, crop: :fill, style:"border-top-left-radius: 15px; border-top-right-radius: 15px;", class:"img-fluid"%><br>
            <% else %>
            <%= image_tag asset_path('profile.png'), class:"img-fluid img-thumbnail mt-4 mb-2", style:"width: 150px; z-index: 1"%>
            <% end %>
              <div class="mask"></div>
            </a>
          </div>
          <div class="card-body pb-0">
            <div class="d-flex justify-content-between">
              <div>
                <p><a href="#!" class="text-dark"><%= service.title %></a></p>
                <p class="small text-muted"><%= service.category %></p>
              </div>
              <div>
                <div class="d-flex flex-row justify-content-end mt-1 mb-4 text-danger">
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                </div>
                <p class="text-dark"><%= service.price %> <i class="fas fa-euro-sign"></i></p>
              </div>
            </div>
          </div>

          <div class="card-body pb-0">
            <div class="d-flex justify-content-between">
              <%= service.description %>
            </div><br>
          </div>
          <hr class="my-0" />
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center pb-2 mb-1">
            <%= link_to user_path(service.user), class:"text-decoration-none" do %>
                 <i class="fa-solid fa-user"></i><small class="flex-grow-1">  <%=  service.user.username %></small>
               <% end %>
               <p><%= link_to "Book", new_service_booking_path(service), class: "btn btn-primary text-decoration-none"  %></p>
            </div>
          </div>
        </div>
      </div>
      <% end %>

    </div>
  </div>
</section>
